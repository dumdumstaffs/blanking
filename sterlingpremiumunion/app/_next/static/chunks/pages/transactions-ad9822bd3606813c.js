(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[673],{3090:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/transactions",function(){return n(2912)}])},952:function(e,r,n){"use strict";n.d(r,{D:function(){return f}});var t=n(865),s=n(6670),a=n(2322),c=n(930),i=n(1899),l=n(412),o=n(45),u=n(2784);function d(e){var r=e.pinLength,n=e.onSubmit,t=(0,u.useState)(""),s=t[0],d=t[1],m=(0,u.useState)([]),h=m[0],f=m[1],p=(0,u.useCallback)(function(e){f(function(r){return(0,c.Z)(r).concat([e])})},[]),j=function(e){e.preventDefault(),s.length===r&&n(s)};return(0,a.jsxs)("form",{onSubmit:j,children:[(0,a.jsx)("p",{className:"text-center text-gray-700",children:"Please enter your transaction PIN to complete this action"}),(0,a.jsx)("div",{className:"flex justify-between gap-4 h-16 sm:h-20 my-12",children:Array.from({length:r}).map(function(e,n){return(0,a.jsx)(o.I,{ref:p,onChange:function(){var e;return function(e){var r=e.inputs,n=e.index,t=e.value,s=e.setValue,a=e.pinLength,c=r[n];if(c){if(t.length-1===n&&""===c.value){s(function(e){return e.slice(0,-1)});return}if(t.length!==n){c.value=null!==(o=t[n])&&void 0!==o?o:"";return}if(1===c.value.length){if(!x(c.value)){c.value=null!==(u=t[n])&&void 0!==u?u:"";return}if(s(function(e){return e+c.value}),n!==a-1){var l=r[n+1];null==l||l.focus()}return}if(c.value.length>1&&0===n){var o,u,d,m=function(e){var t=r[n+e];if(!t)return{v:void 0};t.value=h[e],s(function(r){return r+h[e]}),e===h.length-1&&t.focus()},h=c.value.split("");if(h.length!==a||!h.every(x)){c.value=null!==(d=t[n])&&void 0!==d?d:"";return}for(var f=0;f<h.length;f++){var p=m(f);if("object"===(0,i.Z)(p))return p.v}return}}}({inputs:h,index:n,pinLength:r,value:s,setValue:d})},type:"tel",className:"text-center text-3xl h-full w-full bg-gray-100"},n)})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(l.z,{className:"!px-12 !py-2",children:"Confirm"})})]})}var m=["0","1","2","3","4","5","6","7","8","9"],x=function(e){return m.includes(e)},h=n(9744);function f(e){var r=e.title,n=e.onVerify,c=e.controls,i=function(e){n(e),c.onClose()};return(0,a.jsx)(h.u,(0,s.Z)((0,t.Z)({title:r},c),{children:(0,a.jsx)(d,{pinLength:4,onSubmit:i})}))}},2912:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return X}});var t=n(2322),s=n(9951),a=n(9447),c=n(3569),i=n(9213),l=n(2973),o=n(412),u=n(8720);function d(){var e=(0,u.Mq)().account,r=(0,c.nC)(e.id);return(0,t.jsx)("div",{className:"flex flex-col pb-4",children:(0,t.jsx)(i.d,{query:r,fallback:!0,children:function(e){return(0,t.jsxs)(t.Fragment,{children:[e.map(function(e){return(0,t.jsx)(l.A,{transaction:e},e.id)}),!e.length&&(0,t.jsx)("div",{className:"py-40 flex-center",children:(0,t.jsx)("p",{className:"font-medium",children:"No transactions found"})}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsx)(o.z,{variant:"transparent-dark",className:"w-24",children:"Previous"}),(0,t.jsx)("p",{className:"text-xs text-theme-1 font-medium",children:"Page 1 of 1"}),(0,t.jsx)(o.z,{variant:"transparent-dark",className:"w-24",children:"Next"})]})]})}})})}var m=n(9309),x=n(5636),h=n(6277);function f(e){var r=e.title,n=e.defaultOpen,s=e.children;return(0,t.jsx)(m.p,{defaultOpen:n,children:function(e){var n=e.open;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(m.p.Button,{className:"w-full flex items-center justify-between px-4 sm:px-8 py-4 bg-gray-100",children:[(0,t.jsx)("h3",{className:"text-lg sm:text-xl text-gray-800",children:r}),(0,t.jsx)(x.Z,{className:(0,h.Z)(["w-5 h-5 sm:w-6 sm:h-6 text-gray-500 transition-transform",n&&"transform rotate-90"])})]}),(0,t.jsx)(m.p.Panel,{className:"px-4 sm:px-8 pb-4",children:s})]})}})}var p=n(4819),j=n(2202);function v(){return(0,t.jsxs)("div",{className:"space-y-4 pt-12 pb-12",children:[(0,t.jsx)(N,{}),(0,t.jsx)(y,{})]})}function N(){var e=(0,u.Mq)().account;return(0,t.jsxs)(f,{title:"Request money from same bank",defaultOpen:!0,children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-red-500",children:"* "}),"Request money from another ",p.$.app.NAME," account with your designated account number."]}),(0,t.jsxs)("div",{className:"mt-6 py-6 space-y-4 flex flex-col items-center gap-6",children:[(0,t.jsx)("div",{className:"px-6 py-2 bg-gray-200 rounded-sm",children:(0,t.jsxs)("p",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-xs font-medium",children:"Account Number"}),(0,t.jsx)("span",{className:"text-xl tracking-wide",children:e.accountNumber})]})}),(0,t.jsx)(o.z,{className:"!px-6 !py-2",children:"Copy Account Number"})]})]})}function y(){var e=(0,u.Mq)().account,r=function(){return(0,j.ZP)("Please send us a formal request to provision an external account for this account via email.")};return(0,t.jsxs)(f,{title:"Request money from other banks",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-red-500",children:"* "}),"Request money from other banks with your designated external account. Funds transferred to the account below will be available on your account."]}),e.externalAccount?(0,t.jsxs)("div",{className:"mt-6 py-6 space-y-4 flex flex-col items-center gap-6",children:[(0,t.jsxs)("div",{className:"space-y-6 px-16 py-4 bg-gray-200 rounded-sm",children:[(0,t.jsxs)("p",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-xs font-medium",children:"Account Number"}),(0,t.jsx)("span",{className:"text-xl tracking-wide",children:e.externalAccount.accountNumber})]}),(0,t.jsxs)("p",{className:"flex flex-col items-center",children:[(0,t.jsx)("span",{className:"text-xs font-medium",children:"Routing Number"}),(0,t.jsx)("span",{className:"text-xl tracking-wide",children:e.externalAccount.routingNumber})]})]}),(0,t.jsx)(o.z,{className:"!px-6 !py-2",children:"Copy Account Info"})]}):(0,t.jsxs)("div",{className:"mt-6 py-6 space-y-4 flex flex-col items-center gap-6",children:[(0,t.jsx)("div",{className:"flex-center",children:(0,t.jsx)("p",{className:"p-6 text-lg text-gray-600",children:"External Account not provisioned"})}),(0,t.jsx)(o.z,{onClick:r,variant:"transparent-dark",className:"!px-6 !py-2",children:"Request External Account"})]})]})}var g=n(865),b=n(6670),w=n(6383),Z=n(7536),S=n(4219),k=n(9744),A=n(45),E=n(8295),I=n(8883),T=n(9697),q=n(5632),C=n(3955),P=n(952);function O(){return(0,t.jsxs)("div",{className:"space-y-4 pt-12 pb-12",children:[(0,t.jsx)(_,{}),(0,t.jsx)(F,{})]})}var R=T.TransferOutSchema.create.omit({pin:!0});function _(){var e,r,n,s=(0,q.useRouter)(),a=(0,u.Mq)().account,c=(0,S.u3)(),i=(0,w.Z)((0,k.d)(),2),l=i[0],d=i[1],m=(0,C.cI)({resolver:(0,I.F)(R)}),x=function(e){return c.mutate({accountId:a.id,dto:(0,b.Z)((0,g.Z)({},m.getValues()),{pin:e})},{onSuccess:function(){j.ZP.success("Transfer successful"),s.push({pathname:"transactions",query:{t:"history"}})},onError:function(e){j.ZP.error((0,E.Z)(e))}})},h=m.handleSubmit(l);return(0,t.jsxs)(f,{title:"Transfer to same bank",defaultOpen:!0,children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-red-500",children:"* "}),"Send money to another ",p.$.app.NAME," account. Funds are transferred instantly."]}),(0,t.jsxs)("form",{onSubmit:h,className:"mt-6 space-y-4",children:[(0,t.jsx)(A.I.WithError,{error:null===(e=m.formState.errors.accountNumber)||void 0===e?void 0:e.message,children:(0,t.jsx)(A.v,(0,g.Z)({label:"Beneficiary Account Number",placeholder:"Account Number",type:"tel"},m.register("accountNumber")))}),(0,t.jsx)(A.I.WithError,{error:null===(r=m.formState.errors.amount)||void 0===r?void 0:r.message,children:(0,t.jsx)(A.v,(0,g.Z)({label:"Transfer Amount",placeholder:"Amount",type:"number",step:"0.01",min:"0"},m.register("amount",{valueAsNumber:!0})))}),(0,t.jsx)(A.I.WithError,{error:null===(n=m.formState.errors.amount)||void 0===n?void 0:n.message,children:(0,t.jsx)(A.v,(0,g.Z)({label:"Narration",placeholder:"Narration"},m.register("narration")))}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsx)(o.z,{loading:c.isLoading,className:"!px-12 !py-2",children:"Transfer"})})]}),(0,t.jsx)(P.D,{title:"Confirm Transaction",onVerify:x,controls:d})]})}var W=T.ExternalTransferOutSchema.create.omit({pin:!0});function F(){var e,r,n,s,a,c,i=(0,q.useRouter)(),l=(0,u.Mq)().account,d=(0,Z.w7)(),m=(0,w.Z)((0,k.d)(),2),x=m[0],h=m[1],p=(0,C.cI)({resolver:(0,I.F)(W)}),v=function(e){return d.mutate({accountId:l.id,dto:(0,b.Z)((0,g.Z)({},p.getValues()),{pin:e})},{onSuccess:function(){j.ZP.success("Transfer successful"),i.push({pathname:"transactions",query:{t:"history"}})},onError:function(e){j.ZP.error((0,E.Z)(e))}})},N=p.handleSubmit(x);return(0,t.jsxs)(f,{title:"Transfer to other banks",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-red-500",children:"* "}),"Send money to an external bank account. Funds will be processed by receiving bank within 2-4 days, weekends excluded. This transaction will incur higher fees."]}),(0,t.jsxs)("form",{onSubmit:N,className:"mt-6 space-y-4",children:[(0,t.jsx)(A.I.WithError,{error:null===(e=p.formState.errors.accountNumber)||void 0===e?void 0:e.message,children:(0,t.jsx)(A.v,(0,g.Z)({label:"Beneficiary Account Number",placeholder:"Account Number",type:"tel"},p.register("accountNumber")))}),(0,t.jsx)(A.I.WithError,{error:null===(r=p.formState.errors.routingNumber)||void 0===r?void 0:r.message,children:(0,t.jsx)(A.v,(0,g.Z)({label:"Routing Number",placeholder:"Routing Number",type:"tel"},p.register("routingNumber")))}),(0,t.jsx)(A.I.WithError,{error:null===(n=p.formState.errors.amount)||void 0===n?void 0:n.message,children:(0,t.jsx)(A.v,(0,g.Z)({label:"Transfer Amount",placeholder:"Amount",type:"number",step:"0.01",min:"0"},p.register("amount",{valueAsNumber:!0})))}),(0,t.jsx)(A.I.WithError,{error:null===(s=p.formState.errors.amount)||void 0===s?void 0:s.message,children:(0,t.jsx)(A.v,(0,g.Z)({label:"Bank Name",placeholder:"Bank Name"},p.register("bankName")))}),(0,t.jsx)(A.I.WithError,{error:null===(a=p.formState.errors.amount)||void 0===a?void 0:a.message,children:(0,t.jsx)(A.v,(0,g.Z)({label:"BIC/SWIFT Code",placeholder:"BIC/SWIFT Code"},p.register("swiftCode")))}),(0,t.jsx)(A.I.WithError,{error:null===(c=p.formState.errors.amount)||void 0===c?void 0:c.message,children:(0,t.jsx)(A.v,(0,g.Z)({label:"Narration",placeholder:"Narration"},p.register("narration")))}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsx)(o.z,{loading:d.isLoading,className:"!px-12 !py-2",children:"Transfer"})})]}),(0,t.jsx)(P.D,{title:"Confirm Transaction",onVerify:v,controls:h})]})}var M=n(8503),z=n(6058),B=n(5806),L=n(1424),V=n(9456),D=n(2784),$=["history","send","request"];function X(){var e=(0,q.useRouter)(),r=e.query.t,n=(0,D.useState)(0),c=n[0],i=n[1],l=function(r){e.push({pathname:"/transactions",query:{t:$[r]}})};if("string"==typeof r&&$.includes(r)){var o=$.indexOf(r);o!==c&&i(o)}return(0,t.jsx)(M.c,{description:"Transactions",children:(0,t.jsx)(M.c.Account,{children:(0,t.jsx)(a.$,{children:(0,t.jsxs)(z.O.Group,{selectedIndex:c,onChange:l,children:[(0,t.jsxs)(z.O.List,{className:"py-6 flex items-center justify-around",children:[(0,t.jsx)(s.E,{title:"Transaction history",icon:(0,t.jsx)(B.Z,{className:"w-6 h-6"})}),(0,t.jsx)(s.E,{title:"Send Money",icon:(0,t.jsx)(L.Z,{className:"w-6 h-6"})}),(0,t.jsx)(s.E,{title:"Request Money",icon:(0,t.jsx)(V.Z,{className:"w-6 h-6"})})]}),(0,t.jsxs)(z.O.Panels,{className:"border-t min-h-[400px]",children:[(0,t.jsx)(z.O.Panel,{children:(0,t.jsx)(d,{})}),(0,t.jsx)(z.O.Panel,{children:(0,t.jsx)(O,{})}),(0,t.jsx)(z.O.Panel,{children:(0,t.jsx)(v,{})})]})]})})})})}}},function(e){e.O(0,[949,599,875,955,383,189,503,680,30,774,888,179],function(){return e(e.s=3090)}),_N_E=e.O()}]);