(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[641],{2063:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manager/[userId]/account/[accountId]",function(){return t(7305)}])},4405:function(e,n,t){"use strict";t.d(n,{xl:function(){return f},rg:function(){return m}});var r=t(8788),s=t(5163),i=t(7079);function c(e){return a.apply(this,arguments)}function a(){return(a=(0,r.Z)(function(e){var n,t,r;return(0,s.__generator)(this,function(r){switch(r.label){case 0:return n=e.accountId,t=e.dto,[4,i.dJ.post("/documents/".concat(n),t)];case 1:return[2,r.sent().data]}})})).apply(this,arguments)}function o(){return(o=(0,r.Z)(function(e){var n,t;return(0,s.__generator)(this,function(t){switch(t.label){case 0:return n=e.accountId,[4,i.dJ.get("/admin/documents/".concat(n))];case 1:return[2,t.sent().data]}})})).apply(this,arguments)}var l=t(5148),u=t(2066),d=t(8983),m=function(){var e=(0,u.useQueryClient)();return(0,u.useMutation)(c,{onSuccess:function(n,t){var r=t.accountId;return e.invalidateQueries(d.eA.get(r))}})},x=(0,l.no)("adminDocuments",{for:function(e){return[e]}}),f=function(e){return(0,u.useQuery)(x.for(e),function(){return function(e){return o.apply(this,arguments)}({accountId:e})})}},3521:function(e,n,t){"use strict";t.d(n,{F:function(){return i}});var r=t(2322),s=t(6277);function i(e){var n=e.title,t=e.content,i=e.className;return(0,r.jsxs)("div",{className:(0,s.Z)("flex items-center justify-between",i),children:[(0,r.jsx)("p",{className:"font-medium",children:n}),(0,r.jsx)("p",{children:t})]})}},5034:function(e,n,t){"use strict";t.d(n,{P:function(){return a}});var r=t(865),s=t(6297),i=t(2322),c=t(6277),a=(0,t(2784).forwardRef)(function(e,n){var t=e.className,a=(0,s.Z)(e,["className"]);return(0,i.jsx)("select",(0,r.Z)({ref:n,className:(0,c.Z)("py-1 rounded-md border-0 focus:ring-0 bg-gray-100 focus:bg-gray-200",t)},a))});a.displayName="Select"},1274:function(e,n,t){"use strict";t.d(n,{K:function(){return a}});var r=t(865),s=t(6297),i=t(2322),c=t(6277),a=(0,t(2784).forwardRef)(function(e,n){var t=e.className,a=(0,s.Z)(e,["className"]);return(0,i.jsx)("textarea",(0,r.Z)({ref:n,className:(0,c.Z)("py-2 rounded-md border-0 focus:ring-0 bg-gray-100 focus:bg-gray-200",t)},a))});a.displayName="TextArea"},7305:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return eJ}});var r=t(2322),s=t(8983),i=t(9213),c=t(9951),a=t(9447),o=t(3569),l=t(8837),u=t(412),d=t(8295),m=t(2202);function x(e){var n=e.account,t=(0,s.wM)(),i=function(){return t.mutate({id:n.id,userId:n.user,dto:{isActive:!n.isActive,alert:n.alert,documentRequest:n.documentRequest,externalAccount:n.externalAccount,name:n.name,level:n.level,type:n.type,pin:n.pin,permissions:n.permissions}},{onError:function(e){m.ZP.error((0,d.Z)(e))}})};return(0,r.jsx)("div",{className:"mt-2 divide-y",children:(0,r.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,r.jsx)(u.z,{onClick:i,variant:n.isActive?"critical":void 0,children:n.isActive?"Deactivate":"Activate"})})})}var f=t(865),p=t(45),v=t(1274),h=t(8883),j=t(9697),N=t(2784),g=t(3955),y=j.AccountSchema.adminUpdate.pick({alert:!0});function A(e){var n,t,i,c,a,o,l,x,j=e.account,A=(0,N.useState)(!1),b=A[0],S=A[1],Z=(0,s.wM)(),w=(0,g.cI)({resolver:(0,h.F)(y),defaultValues:{alert:{title:null===(n=j.alert)||void 0===n?void 0:n.title,desc:null===(t=j.alert)||void 0===t?void 0:t.desc}}}),I=w.handleSubmit(function(e){var n=e.alert;return Z.mutate({id:j.id,userId:j.user,dto:{alert:n,externalAccount:j.externalAccount,documentRequest:j.documentRequest,name:j.name,level:j.level,type:j.type,pin:j.pin,isActive:j.isActive,permissions:j.permissions}},{onSuccess:function(){S(!1)},onError:function(e){m.ZP.error((0,d.Z)(e))}})}),D=function(){return Z.mutate({id:j.id,userId:j.user,dto:{alert:null,documentRequest:j.documentRequest,externalAccount:j.externalAccount,name:j.name,level:j.level,type:j.type,pin:j.pin,isActive:j.isActive,permissions:j.permissions}},{onSuccess:function(){w.reset({})},onError:function(e){m.ZP.error((0,d.Z)(e))}})};return b?(0,r.jsxs)("form",{onSubmit:I,className:"mt-2",children:[(0,r.jsx)("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-6 py-4",children:(0,r.jsx)(p.I.WithError,{error:null===(c=w.formState.errors.alert)||void 0===c?void 0:null===(a=c.title)||void 0===a?void 0:a.message,children:(0,r.jsx)(p.I,(0,f.Z)({className:"w-full",placeholder:"Title"},w.register("alert.title")))})}),(0,r.jsx)(p.I.WithError,{error:null===(o=w.formState.errors.alert)||void 0===o?void 0:null===(l=o.desc)||void 0===l?void 0:l.message,children:(0,r.jsx)(v.K,(0,f.Z)({className:"w-full",placeholder:"Description"},w.register("alert.desc")))}),(0,r.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,r.jsx)(u.z,{variant:"transparent-dark",onClick:function(){return S(!1)},children:"Cancel"}),(0,r.jsx)(u.z,{loading:Z.isLoading,children:j.alert?"Update":"Add"})]})]}):(0,r.jsxs)("div",{className:"mt-2 divide-y",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsx)("p",{children:"Alert"}),(0,r.jsx)("p",{children:null!==(x=null===(i=j.alert)||void 0===i?void 0:i.title)&&void 0!==x?x:"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[j.alert&&(0,r.jsx)(u.p,{loading:Z.isLoading,onClick:D,children:"Remove"}),(0,r.jsx)(u.z,{onClick:function(){return S(!0)},children:j.alert?"Update":"Add"})]})]})}var b=t(6670),S=t(5034),Z=t(7181),w=t(6277),I=j.AccountSchema.adminUpdate.pick({documentRequest:!0});function D(e){var n,t,i,c,a,o,l,x,y,A,D,R,P,k,C,E,q=e.account,F=(0,N.useState)(!1),_=F[0],O=F[1],T=(0,s.wM)(),Q=(0,g.cI)({resolver:(0,h.F)(I),defaultValues:{documentRequest:{name:null===(n=q.documentRequest)||void 0===n?void 0:n.name,desc:null===(t=q.documentRequest)||void 0===t?void 0:t.desc,status:null!==(x=null===(i=q.documentRequest)||void 0===i?void 0:i.status)&&void 0!==x?x:"idle"}}}),z=Q.handleSubmit(function(e){var n=e.documentRequest;return T.mutate({id:q.id,userId:q.user,dto:{documentRequest:n,alert:q.alert,externalAccount:q.externalAccount,name:q.name,level:q.level,type:q.type,pin:q.pin,isActive:q.isActive,permissions:q.permissions}},{onSuccess:function(){O(!1)},onError:function(e){m.ZP.error((0,d.Z)(e))}})}),M=function(){return T.mutate({id:q.id,userId:q.user,dto:{documentRequest:null,alert:q.alert,externalAccount:q.externalAccount,name:q.name,level:q.level,type:q.type,pin:q.pin,isActive:q.isActive,permissions:q.permissions}},{onSuccess:function(){Q.reset({})},onError:function(e){m.ZP.error((0,d.Z)(e))}})};return _?(0,r.jsxs)("form",{onSubmit:z,className:"mt-2",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-6 py-4",children:[(0,r.jsx)(p.I.WithError,{error:null===(y=Q.formState.errors.documentRequest)||void 0===y?void 0:null===(A=y.name)||void 0===A?void 0:A.message,children:(0,r.jsx)(p.I,(0,f.Z)({className:"w-full",placeholder:"Document Name"},Q.register("documentRequest.name")))}),(0,r.jsx)(p.I.WithError,{className:(0,w.Z)(!q.documentRequest&&"hidden"),error:null===(D=Q.formState.errors.documentRequest)||void 0===D?void 0:null===(R=D.status)||void 0===R?void 0:R.message,children:(0,r.jsx)(S.P,(0,b.Z)((0,f.Z)({className:"w-full",placeholder:"Status"},Q.register("documentRequest.status")),{children:j.DocumentStatus.map(function(e){return(0,r.jsx)("option",{value:e,children:(0,Z.k)(e)},e)})}))})]}),(0,r.jsx)(p.I.WithError,{error:null===(P=Q.formState.errors.documentRequest)||void 0===P?void 0:null===(k=P.desc)||void 0===k?void 0:k.message,children:(0,r.jsx)(v.K,(0,f.Z)({className:"w-full",placeholder:"Description"},Q.register("documentRequest.desc")))}),(0,r.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,r.jsx)(u.z,{variant:"transparent-dark",onClick:function(){return O(!1)},children:"Cancel"}),(0,r.jsx)(u.z,{loading:T.isLoading,children:q.documentRequest?"Update":"Request"})]})]}):(0,r.jsxs)("div",{className:"mt-2 divide-y",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsx)("p",{children:"Document Name"}),(0,r.jsx)("p",{children:null!==(C=null===(c=q.documentRequest)||void 0===c?void 0:c.name)&&void 0!==C?C:"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsx)("p",{children:"Description"}),(0,r.jsx)("p",{children:null!==(E=null===(a=q.documentRequest)||void 0===a?void 0:a.desc)&&void 0!==E?E:"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsx)("p",{children:"Status"}),(0,r.jsx)("p",{children:(null===(o=q.documentRequest)||void 0===o?void 0:o.status)?(0,Z.k)(null===(l=q.documentRequest)||void 0===l?void 0:l.status):"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[q.documentRequest&&(0,r.jsx)(u.p,{loading:T.isLoading,onClick:M,children:"Cancel Request"}),(0,r.jsx)(u.z,{onClick:function(){return O(!0)},children:q.documentRequest?"Update":"Request"})]})]})}var R=j.AccountSchema.adminUpdate.pick({externalAccount:!0});function P(e){var n,t,i,c,a,o,l,x,v,j,y=e.account,A=(0,N.useState)(!1),b=A[0],S=A[1],Z=(0,s.wM)(),w=(0,g.cI)({resolver:(0,h.F)(R),defaultValues:{externalAccount:{accountNumber:null===(n=y.externalAccount)||void 0===n?void 0:n.accountNumber,routingNumber:null===(t=y.externalAccount)||void 0===t?void 0:t.routingNumber}}}),I=w.handleSubmit(function(e){var n=e.externalAccount;return Z.mutate({id:y.id,userId:y.user,dto:{externalAccount:n,alert:y.alert,documentRequest:y.documentRequest,name:y.name,level:y.level,type:y.type,pin:y.pin,isActive:y.isActive,permissions:y.permissions}},{onSuccess:function(){S(!1)},onError:function(e){m.ZP.error((0,d.Z)(e))}})}),D=function(){return Z.mutate({id:y.id,userId:y.user,dto:{externalAccount:null,alert:y.alert,documentRequest:y.documentRequest,name:y.name,level:y.level,type:y.type,pin:y.pin,isActive:y.isActive,permissions:y.permissions}},{onSuccess:function(){w.reset({})},onError:function(e){m.ZP.error((0,d.Z)(e))}})};return b?(0,r.jsxs)("form",{onSubmit:I,className:"mt-2",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-6 py-4",children:[(0,r.jsx)(p.I.WithError,{error:null===(a=w.formState.errors.externalAccount)||void 0===a?void 0:null===(o=a.accountNumber)||void 0===o?void 0:o.message,children:(0,r.jsx)(p.I,(0,f.Z)({className:"w-full",placeholder:"Account number"},w.register("externalAccount.accountNumber")))}),(0,r.jsx)(p.I.WithError,{error:null===(l=w.formState.errors.externalAccount)||void 0===l?void 0:null===(x=l.routingNumber)||void 0===x?void 0:x.message,children:(0,r.jsx)(p.I,(0,f.Z)({className:"w-full",placeholder:"Routing number"},w.register("externalAccount.routingNumber")))})]}),(0,r.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,r.jsx)(u.z,{variant:"transparent-dark",onClick:function(){return S(!1)},children:"Cancel"}),(0,r.jsx)(u.z,{loading:Z.isLoading,children:y.externalAccount?"Update":"Create"})]})]}):(0,r.jsxs)("div",{className:"mt-2 divide-y",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsx)("p",{children:"Account Number"}),(0,r.jsx)("p",{children:null!==(v=null===(i=y.externalAccount)||void 0===i?void 0:i.accountNumber)&&void 0!==v?v:"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsx)("p",{children:"Routing Number"}),(0,r.jsx)("p",{children:null!==(j=null===(c=y.externalAccount)||void 0===c?void 0:c.routingNumber)&&void 0!==j?j:"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[y.externalAccount&&(0,r.jsx)(u.p,{loading:Z.isLoading,onClick:D,children:"Remove"}),(0,r.jsx)(u.z,{onClick:function(){return S(!0)},children:y.externalAccount?"Update":"Create"})]})]})}var k=t(6297),C=(0,N.forwardRef)(function(e,n){var t=e.className,s=(0,k.Z)(e,["className"]);return(0,r.jsx)("input",(0,f.Z)({ref:n,type:"checkbox",className:(0,w.Z)(["p-2 rounded-md text-theme-1","border-gray-200 hover:border-theme-1/30 focus:border-theme-1/20 focus:ring-2 focus:ring-offset-1 focus:ring-theme-1/40",t])},s))});C.displayName="Checkbox";var E=j.AccountSchema.adminUpdate.pick({type:!0,level:!0,isActive:!0,permissions:!0});function q(e){var n,t,i=e.account,c=(0,s.wM)(),a=(0,g.cI)({resolver:(0,h.F)(E),defaultValues:{type:i.type,level:i.level,isActive:i.isActive,permissions:{canSetPin:i.permissions.canSetPin,canTransfer:i.permissions.canTransfer,canTransferExternal:i.permissions.canTransferExternal,canWithdraw:i.permissions.canWithdraw}}}),o=a.handleSubmit(function(e){c.mutate({id:i.id,userId:i.user,dto:(0,f.Z)({alert:i.alert,externalAccount:i.externalAccount,documentRequest:i.documentRequest,name:i.name,pin:i.pin},e)},{onSuccess:function(){a.reset({})},onError:function(e){m.ZP.error((0,d.Z)(e))}})});return(0,r.jsxs)("form",{onSubmit:o,className:"mt-2",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between sm:items-center gap-1",children:[(0,r.jsx)("p",{children:"Type"}),(0,r.jsx)(p.I.WithError,{className:"w-auto",error:null===(n=a.formState.errors.type)||void 0===n?void 0:n.message,children:(0,r.jsx)(S.P,(0,b.Z)((0,f.Z)({placeholder:"Status"},a.register("type")),{children:j.AccountTypes.map(function(e){return(0,r.jsx)("option",{value:e,children:(0,Z.k)(e)},e)})}))})]}),(0,r.jsxs)("div",{className:"flex justify-between sm:items-center gap-2",children:[(0,r.jsx)("p",{children:"Level"}),(0,r.jsx)(p.I.WithError,{className:"w-auto",error:null===(t=a.formState.errors.level)||void 0===t?void 0:t.message,children:(0,r.jsx)(S.P,(0,b.Z)((0,f.Z)({placeholder:"Status"},a.register("level")),{children:j.AccountLevels.map(function(e){return(0,r.jsx)("option",{value:e,children:(0,Z.k)(e)},e)})}))})]}),(0,r.jsxs)("div",{className:"flex justify-between sm:items-center gap-2 py-1",children:[(0,r.jsx)("p",{children:"Active"}),(0,r.jsx)(C,(0,f.Z)({},a.register("isActive")))]}),(0,r.jsxs)("div",{className:"flex justify-between sm:items-center gap-2 py-1",children:[(0,r.jsx)("p",{children:"PIN Update"}),(0,r.jsx)(C,(0,f.Z)({},a.register("permissions.canSetPin")))]}),(0,r.jsxs)("div",{className:"flex justify-between sm:items-center gap-2 py-1",children:[(0,r.jsx)("p",{children:"Transfer"}),(0,r.jsx)(C,(0,f.Z)({},a.register("permissions.canTransfer")))]}),(0,r.jsxs)("div",{className:"flex justify-between sm:items-center gap-2 py-1",children:[(0,r.jsx)("p",{children:"External Transfer"}),(0,r.jsx)(C,(0,f.Z)({},a.register("permissions.canTransferExternal")))]}),(0,r.jsxs)("div",{className:"flex justify-between sm:items-center gap-2 py-1",children:[(0,r.jsx)("p",{children:"Withdrawal"}),(0,r.jsx)(C,(0,f.Z)({},a.register("permissions.canWithdraw")))]})]}),(0,r.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,r.jsx)(u.z,{variant:a.formState.isDirty?"dark":"transparent-dark",loading:c.isLoading,children:"Update"})})]})}var F=j.AccountSchema.adminUpdate.pick({pin:!0});function _(e){var n,t,i=e.account,c=(0,N.useState)(!1),a=c[0],o=c[1],l=(0,s.wM)(),x=(0,g.cI)({resolver:(0,h.F)(F),defaultValues:{pin:i.pin}}),v=x.handleSubmit(function(e){var n=e.pin;return l.mutate({id:i.id,userId:i.user,dto:{pin:n,alert:i.alert,externalAccount:i.externalAccount,documentRequest:i.documentRequest,name:i.name,level:i.level,type:i.type,isActive:i.isActive,permissions:i.permissions}},{onSuccess:function(){o(!1)},onError:function(e){m.ZP.error((0,d.Z)(e))}})}),j=function(){return l.mutate({id:i.id,userId:i.user,dto:{pin:null,alert:i.alert,externalAccount:i.externalAccount,documentRequest:i.documentRequest,name:i.name,level:i.level,type:i.type,isActive:i.isActive,permissions:i.permissions}},{onSuccess:function(){x.reset({})},onError:function(e){m.ZP.error((0,d.Z)(e))}})};return a?(0,r.jsxs)("form",{onSubmit:v,className:"mt-2",children:[(0,r.jsx)(p.I.WithError,{error:null===(n=x.formState.errors.pin)||void 0===n?void 0:n.message,children:(0,r.jsx)(p.I,(0,f.Z)({placeholder:"PIN"},x.register("pin")))}),(0,r.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[(0,r.jsx)(u.z,{variant:"transparent-dark",onClick:function(){return o(!1)},children:"Cancel"}),(0,r.jsx)(u.z,{loading:l.isLoading,children:i.documentRequest?"Update":"Create"})]})]}):(0,r.jsxs)("div",{className:"mt-2 divide-y",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,r.jsx)("p",{children:"PIN"}),(0,r.jsx)("p",{children:null!==(t=i.pin)&&void 0!==t?t:"N/A"})]}),(0,r.jsxs)("div",{className:"flex justify-end pt-4 gap-2",children:[i.pin&&(0,r.jsx)(u.p,{loading:l.isLoading,onClick:j,children:"Remove"}),(0,r.jsx)(u.z,{onClick:function(){return o(!0)},children:i.pin?"Update":"Create"})]})]})}var O=t(6383),T=t(8788),Q=t(5163),z=t(7079);function M(e){return W.apply(this,arguments)}function W(){return(W=(0,T.Z)(function(e){var n,t,r;return(0,Q.__generator)(this,function(r){switch(r.label){case 0:return n=e.accountId,t=e.dto,[4,z.dJ.post("/admin/bonus/".concat(n),t)];case 1:return[2,r.sent().data]}})})).apply(this,arguments)}function U(e){return L.apply(this,arguments)}function L(){return(L=(0,T.Z)(function(e){var n,t,r;return(0,Q.__generator)(this,function(r){switch(r.label){case 0:return n=e.accountId,t=e.id,[4,z.dJ.delete("/admin/bonus/".concat(n,"/").concat(t))];case 1:return[2,r.sent().data]}})})).apply(this,arguments)}var J=t(2066),B=function(){var e=(0,J.useQueryClient)();return(0,J.useMutation)(M,{onSuccess:function(n,t){var r=t.accountId;return e.invalidateQueries(o.PO.for(r))}})},V=function(){var e=(0,J.useQueryClient)();return(0,J.useMutation)(U,{onSuccess:function(n,t){var r=t.accountId,s=t.id;return Promise.all([e.invalidateQueries(o.PO.for(r)),e.invalidateQueries(o.PO.getFor(r,"bonus",s)),])}})};function K(e){return $.apply(this,arguments)}function $(){return($=(0,T.Z)(function(e){var n,t,r;return(0,Q.__generator)(this,function(r){switch(r.label){case 0:return n=e.accountId,t=e.dto,[4,z.dJ.post("/admin/deposits/".concat(n),t)];case 1:return[2,r.sent().data]}})})).apply(this,arguments)}function X(e){return G.apply(this,arguments)}function G(){return(G=(0,T.Z)(function(e){var n,t,r;return(0,Q.__generator)(this,function(r){switch(r.label){case 0:return n=e.accountId,t=e.id,[4,z.dJ.delete("/admin/deposits/".concat(n,"/").concat(t))];case 1:return[2,r.sent().data]}})})).apply(this,arguments)}var H=function(){var e=(0,J.useQueryClient)();return(0,J.useMutation)(K,{onSuccess:function(n,t){var r=t.accountId;return e.invalidateQueries(o.PO.for(r))}})},Y=function(){var e=(0,J.useQueryClient)();return(0,J.useMutation)(X,{onSuccess:function(n,t){var r=t.accountId,s=t.id;return Promise.all([e.invalidateQueries(o.PO.for(r)),e.invalidateQueries(o.PO.getFor(r,"deposit",s)),])}})};function ee(e){return en.apply(this,arguments)}function en(){return(en=(0,T.Z)(function(e){var n,t,r;return(0,Q.__generator)(this,function(r){switch(r.label){case 0:return n=e.accountId,t=e.dto,[4,z.dJ.post("/admin/transfers/external/in/".concat(n),t)];case 1:return[2,r.sent().data]}})})).apply(this,arguments)}function et(e){return er.apply(this,arguments)}function er(){return(er=(0,T.Z)(function(e){var n,t,r;return(0,Q.__generator)(this,function(r){switch(r.label){case 0:return n=e.accountId,t=e.id,[4,z.dJ.delete("/admin/transfers/external/in/".concat(n,"/").concat(t))];case 1:return[2,r.sent().data]}})})).apply(this,arguments)}var es=function(){var e=(0,J.useQueryClient)();return(0,J.useMutation)(ee,{onSuccess:function(n,t){var r=t.accountId;return e.invalidateQueries(o.PO.for(r))}})},ei=function(){var e=(0,J.useQueryClient)();return(0,J.useMutation)(et,{onSuccess:function(n,t){var r=t.accountId,s=t.id;return Promise.all([e.invalidateQueries(o.PO.for(r)),e.invalidateQueries(o.PO.getFor(r,"externalTransferIn",s)),])}})},ec=t(9744),ea=t(5632);function eo(e){var n=e.account,t=(0,ea.useRouter)(),s=(0,O.Z)((0,ec.d)(),2),i=s[0],c=s[1],a=(0,O.Z)((0,ec.d)(),2),o=a[0],l=a[1],d=(0,O.Z)((0,ec.d)(),2),m=d[0],x=d[1],p=function(){t.push({pathname:"/manager/".concat(n.user,"/account/").concat(n.id),query:{t:"transactions"}})};return(0,r.jsxs)("div",{className:"py-6 px-2 flex flex-col md:flex-row gap-4 flex-wrap overflow-hidden",children:[(0,r.jsx)(u.z,{onClick:i,className:"text-xs",children:"Add Bonus"}),(0,r.jsx)(u.z,{onClick:o,className:"text-xs",children:"Add Deposit"}),(0,r.jsx)(u.z,{onClick:m,className:"text-xs",children:"Add External Transfer"}),(0,r.jsx)(ec.u,(0,b.Z)((0,f.Z)({title:"Add Bonus"},c),{children:(0,r.jsx)(el,{account:n,onSuccess:p})})),(0,r.jsx)(ec.u,(0,b.Z)((0,f.Z)({title:"Add Deposit"},l),{children:(0,r.jsx)(eu,{account:n,onSuccess:p})})),(0,r.jsx)(ec.u,(0,b.Z)((0,f.Z)({title:"Add External Transfer"},x),{children:(0,r.jsx)(ed,{account:n,onSuccess:p})}))]})}function el(e){var n,t=e.account,s=e.onSuccess,i=B(),c=(0,g.cI)({resolver:(0,h.F)(j.BonusSchema.adminCreate)}),a=c.handleSubmit(function(e){i.mutate({accountId:t.id,dto:e},{onSuccess:s})});return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-red-500",children:"* "}),"Add bonus to this account."]}),(0,r.jsxs)("form",{onSubmit:a,className:"mt-6 space-y-4",children:[(0,r.jsx)(p.I.WithError,{error:null===(n=c.formState.errors.amount)||void 0===n?void 0:n.message,children:(0,r.jsx)(p.v,(0,f.Z)({label:"Bonus Amount",placeholder:"Enter Bonus Amount",type:"tel"},c.register("amount",{valueAsNumber:!0})))}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsx)(u.z,{loading:i.isLoading,className:"!px-12 !py-2",children:"Add"})})]})]})}function eu(e){var n,t=e.account,s=e.onSuccess,i=H(),c=(0,g.cI)({resolver:(0,h.F)(j.DepositSchema.adminCreate)}),a=c.handleSubmit(function(e){i.mutate({accountId:t.id,dto:e},{onSuccess:s})});return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-red-500",children:"* "}),"Add deposit to this account."]}),(0,r.jsxs)("form",{onSubmit:a,className:"mt-6 space-y-4",children:[(0,r.jsx)(p.I.WithError,{error:null===(n=c.formState.errors.amount)||void 0===n?void 0:n.message,children:(0,r.jsx)(p.v,(0,f.Z)({label:"Deposit Amount",placeholder:"Enter Deposit Amount",type:"tel"},c.register("amount",{valueAsNumber:!0})))}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsx)(u.z,{loading:i.isLoading,className:"!px-12 !py-2",children:"Add"})})]})]})}function ed(e){var n,t,s,i=e.account,c=e.onSuccess,a=es(),o=(0,g.cI)({resolver:(0,h.F)(j.ExternalTransferInSchema.adminCreate)}),l=o.handleSubmit(function(e){a.mutate({accountId:i.id,dto:e},{onSuccess:c})});return(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("span",{className:"text-red-500",children:"* "}),"Add external transfer to this account."]}),(0,r.jsxs)("form",{onSubmit:l,className:"mt-6 space-y-4",children:[(0,r.jsx)(p.I.WithError,{error:null===(n=o.formState.errors.accountName)||void 0===n?void 0:n.message,children:(0,r.jsx)(p.v,(0,f.Z)({label:"Acount Name",placeholder:"Enter Acount Name",type:"tel"},o.register("accountName")))}),(0,r.jsx)(p.I.WithError,{error:null===(t=o.formState.errors.bankName)||void 0===t?void 0:t.message,children:(0,r.jsx)(p.v,(0,f.Z)({label:"Bank Name",placeholder:"Enter Bank Name",type:"tel"},o.register("bankName")))}),(0,r.jsx)(p.I.WithError,{error:null===(s=o.formState.errors.amount)||void 0===s?void 0:s.message,children:(0,r.jsx)(p.v,(0,f.Z)({label:"Transfer Amount",placeholder:"Enter Transfer Amount",type:"tel"},o.register("amount",{valueAsNumber:!0})))}),(0,r.jsx)("div",{className:"flex justify-end pt-4",children:(0,r.jsx)(u.z,{loading:a.isLoading,className:"!px-12 !py-2",children:"Add"})})]})]})}function em(e){var n,t=e.account,s=(0,o.ep)(t.id);return(0,r.jsxs)(a.$.Content,{children:[(0,r.jsx)(eo,{account:t}),(0,r.jsx)("div",{className:"flex-center",children:(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center px-12 py-3 bg-gray-100",children:[(0,r.jsx)("p",{className:"text-xs",children:t.name}),(0,r.jsx)("p",{className:"text-xl font-medium text-center mt-2",children:t.accountNumber}),(0,r.jsxs)("p",{className:"font-light text-lg mt-2",children:["$",(0,l.a)(null==s?void 0:null===(n=s.data)||void 0===n?void 0:n.total)]})]})}),(0,r.jsx)("div",{className:"py-3",children:(0,r.jsx)(q,{account:t})}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)("h4",{className:"text-lg font-medium",children:"Manage PIN"}),(0,r.jsx)(_,{account:t})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)("h4",{className:"text-lg font-medium",children:"External Account"}),(0,r.jsx)("p",{className:"mt-2",children:"Provision external account for this account."}),(0,r.jsx)(P,{account:t})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)("h4",{className:"text-lg font-medium",children:"Request Document"}),(0,r.jsx)("p",{className:"mt-2",children:"Request user to upload document for this account."}),(0,r.jsx)(D,{account:t})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)("h4",{className:"text-lg font-medium",children:"Alert"}),(0,r.jsx)("p",{className:"mt-2",children:"Place account on alert."}),(0,r.jsx)(A,{account:t})]}),(0,r.jsxs)("div",{className:"py-3",children:[(0,r.jsx)("h4",{className:"text-lg font-medium",children:t.isActive?"Deactivate":"Activate"}),(0,r.jsx)("p",{className:"mt-2",children:"Activating this account will allow transaction on the account."}),(0,r.jsx)(x,{account:t})]})]})}var ex=t(4405);function ef(e){var n=e.account,t=(0,ex.xl)(n.id);return(0,r.jsx)("div",{className:"flex flex-col pb-4",children:(0,r.jsx)(i.d,{query:t,fallback:!0,children:function(e){return(0,r.jsxs)(r.Fragment,{children:[e.map(function(e){return(0,r.jsxs)("div",{className:"flex items-center justify-between py-4 even:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)("p",{children:e.name}),(0,r.jsx)("p",{className:"text-xs",children:new Date(e.createdAt).toDateString()})]}),(0,r.jsx)("div",{className:"flex justify-end pt-2 gap-2",children:(0,r.jsx)("a",{href:e.url,download:!0,children:(0,r.jsx)(u.z,{children:"View"})})})]},e.id)}),!e.length&&(0,r.jsx)("div",{className:"py-40 flex-center",children:(0,r.jsx)("p",{className:"font-medium",children:"No documents found"})})]})}})})}var ep=t(2973),ev=t(3188),eh=t(3521);function ej(e){var n=e.bonus,t=e.onDone,s=V(),i=function(){return s.mutate({accountId:n.account,id:n.id},{onSettled:t,onError:function(e){m.ZP.error((0,d.Z)(e))}})};return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(eh.F,{title:"Amount",content:n.amount}),(0,r.jsx)(eh.F,{title:"Date",content:new Date(n.createdAt).toDateString()}),(0,r.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,r.jsx)(u.p,{onClick:i,children:"Delete"})})]})}function eN(e){return eg.apply(this,arguments)}function eg(){return(eg=(0,T.Z)(function(e){var n,t,r;return(0,Q.__generator)(this,function(r){switch(r.label){case 0:return n=e.accountId,t=e.id,[4,z.dJ.delete("/admin/charges/".concat(n,"/").concat(t))];case 1:return[2,r.sent().data]}})})).apply(this,arguments)}var ey=function(){var e=(0,J.useQueryClient)();return(0,J.useMutation)(eN,{onSuccess:function(n,t){var r=t.accountId,s=t.id;return Promise.all([e.invalidateQueries(o.PO.for(r)),e.invalidateQueries(o.PO.getFor(r,"charge",s)),])}})};function eA(e){var n=e.charge,t=e.onDone,s=ey(),i=function(){return s.mutate({accountId:n.account,id:n.id},{onSettled:t,onError:function(e){m.ZP.error((0,d.Z)(e))}})};return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(eh.F,{title:"Amount",content:n.amount}),(0,r.jsx)(eh.F,{title:"Date",content:new Date(n.createdAt).toDateString()}),(0,r.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,r.jsx)(u.p,{onClick:i,children:"Delete"})})]})}function eb(e){var n=e.deposit,t=e.onDone,s=Y(),i=function(){return s.mutate({accountId:n.account,id:n.id},{onSettled:t,onError:function(e){m.ZP.error((0,d.Z)(e))}})};return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(eh.F,{title:"Amount",content:n.amount}),(0,r.jsx)(eh.F,{title:"Date",content:new Date(n.createdAt).toDateString()}),(0,r.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,r.jsx)(u.p,{onClick:i,children:"Delete"})})]})}function eS(e){var n=e.externalTransferIn,t=e.onDone,s=ei(),i=function(){return s.mutate({accountId:n.account,id:n.id},{onSettled:t,onError:function(e){m.ZP.error((0,d.Z)(e))}})};return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(eh.F,{title:"Sender",content:n.accountName}),(0,r.jsx)(eh.F,{title:"Sender Bank",content:n.bankName}),(0,r.jsx)(eh.F,{title:"Amount",content:n.amount}),(0,r.jsx)(eh.F,{title:"Date",content:new Date(n.createdAt).toDateString()}),(0,r.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,r.jsx)(u.p,{onClick:i,children:"Delete"})})]})}var eZ=t(7536);function ew(e){var n=e.externalTransferOut,t=e.onDone,s=(0,eZ.N1)(),i=function(){return s.mutate({accountId:n.account,id:n.id},{onSettled:t,onError:function(e){m.ZP.error((0,d.Z)(e))}})};return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(eh.F,{title:"Receiver Account Number",content:n.accountNumber}),(0,r.jsx)(eh.F,{title:"Receiver Routing Number",content:n.routingNumber}),(0,r.jsx)(eh.F,{title:"Amount",content:n.amount}),(0,r.jsx)(eh.F,{title:"Date",content:new Date(n.createdAt).toDateString()}),(0,r.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,r.jsx)(u.p,{onClick:i,children:"Delete"})})]})}function eI(e){return eD.apply(this,arguments)}function eD(){return(eD=(0,T.Z)(function(e){var n,t,r;return(0,Q.__generator)(this,function(r){switch(r.label){case 0:return n=e.accountId,t=e.id,[4,z.dJ.delete("/admin/transfers/in/".concat(n,"/").concat(t))];case 1:return[2,r.sent().data]}})})).apply(this,arguments)}var eR=function(){var e=(0,J.useQueryClient)();return(0,J.useMutation)(eI,{onSuccess:function(n,t){var r=t.accountId,s=t.id;return Promise.all([e.invalidateQueries(o.PO.for(r)),e.invalidateQueries(o.PO.getFor(r,"transferIn",s)),])}})};function eP(e){var n=e.transferIn,t=e.onDone,s=eR(),i=function(){return s.mutate({accountId:n.account,id:n.id},{onSettled:t,onError:function(e){m.ZP.error((0,d.Z)(e))}})};return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(eh.F,{title:"Sender",content:n.accountName}),(0,r.jsx)(eh.F,{title:"Sender Account Number",content:n.accountNumber}),(0,r.jsx)(eh.F,{title:"Amount",content:n.amount}),(0,r.jsx)(eh.F,{title:"Date",content:new Date(n.createdAt).toDateString()}),(0,r.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,r.jsx)(u.p,{onClick:i,children:"Delete"})})]})}var ek=t(4219);function eC(e){var n=e.transferOut,t=e.onDone,s=(0,ek.xR)(),i=function(){return s.mutate({accountId:n.account,id:n.id},{onSettled:t,onError:function(e){m.ZP.error((0,d.Z)(e))}})};return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(eh.F,{title:"Receiver",content:n.accountName}),(0,r.jsx)(eh.F,{title:"Receiver Account Number",content:n.accountNumber}),(0,r.jsx)(eh.F,{title:"Amount",content:n.amount}),(0,r.jsx)(eh.F,{title:"Date",content:new Date(n.createdAt).toDateString()}),(0,r.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,r.jsx)(u.p,{onClick:i,children:"Delete"})})]})}function eE(e){return eq.apply(this,arguments)}function eq(){return(eq=(0,T.Z)(function(e){var n,t,r;return(0,Q.__generator)(this,function(r){switch(r.label){case 0:return n=e.accountId,t=e.id,[4,z.dJ.delete("/admin/withdrawals/".concat(n,"/").concat(t))];case 1:return[2,r.sent().data]}})})).apply(this,arguments)}var eF=function(){var e=(0,J.useQueryClient)();return(0,J.useMutation)(eE,{onSuccess:function(n,t){var r=t.accountId,s=t.id;return Promise.all([e.invalidateQueries(o.PO.for(r)),e.invalidateQueries(o.PO.getFor(r,"withdrawal",s)),])}})};function e_(e){var n=e.withdrawal,t=e.onDone,s=eF(),i=function(){return s.mutate({accountId:n.account,id:n.id},{onSettled:t,onError:function(e){m.ZP.error((0,d.Z)(e))}})};return(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)(eh.F,{title:"Amount",content:n.amount}),(0,r.jsx)(eh.F,{title:"Method",content:n.method}),(0,r.jsx)(eh.F,{title:"Date",content:new Date(n.createdAt).toDateString()}),(0,r.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,r.jsx)(u.p,{onClick:i,children:"Delete"})})]})}function eO(e){var n=e.account,t=(0,o.cR)(n.id),s=(0,O.Z)((0,ec.d)(),2),c=s[0],a=s[1],l=(0,N.useState)(),d=l[0],m=l[1],x=function(e){m(e),c()};return(0,r.jsxs)("div",{className:"flex flex-col pb-4",children:[(0,r.jsx)(i.d,{query:t,fallback:!0,children:function(e){return(0,r.jsxs)(r.Fragment,{children:[e.map(function(e){return(0,r.jsx)(ep.A,{transaction:e,onClick:function(){return x(e)}},e.id)}),!e.length&&(0,r.jsx)("div",{className:"py-40 flex-center",children:(0,r.jsx)("p",{className:"font-medium",children:"No transactions found"})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,r.jsx)(u.z,{variant:"transparent-dark",className:"w-24",children:"Previous"}),(0,r.jsx)("p",{className:"text-xs text-theme-1 font-medium",children:"Page 1 of 1"}),(0,r.jsx)(u.z,{variant:"transparent-dark",className:"w-24",children:"Next"})]})]})}}),(0,r.jsx)(ec.u,(0,b.Z)((0,f.Z)({title:d&&(0,ev.T)(d).desc},a),{children:(0,r.jsx)(eT,{transaction:d,onDone:a.onClose})}))]})}function eT(e){var n=e.transaction,t=e.onDone;return(null==n?void 0:n.type)==="bonus"?(0,r.jsx)(ej,{bonus:n,onDone:t}):(null==n?void 0:n.type)==="deposit"?(0,r.jsx)(eb,{deposit:n,onDone:t}):(null==n?void 0:n.type)==="charge"?(0,r.jsx)(eA,{charge:n,onDone:t}):(null==n?void 0:n.type)==="withdrawal"?(0,r.jsx)(e_,{withdrawal:n,onDone:t}):(null==n?void 0:n.type)==="transferIn"?(0,r.jsx)(eP,{transferIn:n,onDone:t}):(null==n?void 0:n.type)==="transferOut"?(0,r.jsx)(eC,{transferOut:n,onDone:t}):(null==n?void 0:n.type)==="externalTransferIn"?(0,r.jsx)(eS,{externalTransferIn:n,onDone:t}):(null==n?void 0:n.type)==="externalTransferOut"?(0,r.jsx)(ew,{externalTransferOut:n,onDone:t}):null}var eQ=t(8503),ez=t(6058),eM=t(6824),eW=t(9855),eU=t(6992),eL=["manage","transactions","documents"];function eJ(){var e=(0,ea.useRouter)(),n=e.query.userId,t=e.query.accountId,o=(0,s.Ds)(null!=n?n:"",null!=t?t:""),l=e.query.t,u=(0,N.useState)(0),d=u[0],m=u[1],x=function(r){e.push({pathname:"/manager/".concat(n,"/account/").concat(t),query:{t:eL[r]}})};if("string"==typeof l&&eL.includes(l)){var f=eL.indexOf(l);f!==d&&m(f)}return(0,r.jsx)(eQ.c,{children:(0,r.jsx)(eQ.c.Manager,{children:(0,r.jsx)(a.$,{children:(0,r.jsx)(i.d,{query:o,fallback:!0,children:function(e){return(0,r.jsxs)(ez.O.Group,{selectedIndex:d,onChange:x,children:[(0,r.jsxs)(ez.O.List,{className:"py-6 flex items-center justify-around",children:[(0,r.jsx)(c.E,{title:"Manage Account",icon:(0,r.jsx)(eM.Z,{className:"w-6 h-6"})}),(0,r.jsx)(c.E,{title:"Transactions",icon:(0,r.jsx)(eW.Z,{className:"w-6 h-6"})}),(0,r.jsx)(c.E,{title:"Documents",icon:(0,r.jsx)(eU.Z,{className:"w-6 h-6"})})]}),(0,r.jsxs)(ez.O.Panels,{className:"border-t min-h-[400px]",children:[(0,r.jsx)(ez.O.Panel,{children:(0,r.jsx)(em,{account:e})}),(0,r.jsx)(ez.O.Panel,{children:(0,r.jsx)(eO,{account:e})}),(0,r.jsx)(ez.O.Panel,{children:(0,r.jsx)(ef,{account:e})})]})]})}})})})})}},7181:function(e,n,t){"use strict";function r(e){return e?e[0].toUpperCase()+e.slice(1):""}t.d(n,{k:function(){return r}})}},function(e){e.O(0,[949,599,875,955,383,290,503,680,30,774,888,179],function(){return e(e.s=2063)}),_N_E=e.O()}]);