(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{8485:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/settings",function(){return r(2155)}])},2155:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return _}});var t=r(8788),a=r(865),i=r(6670),n=r(5163),l=r(2322),o=r(7545),c=r(9680),d=r(4649),u=r(412),m=r(45),f=r(9447),p=r(5034),x=r(4819),h=r(8503),j=r(8295),y=r(8883),N=r(9697),w=r(9644),v=r.n(w),g=r(5632),S=r(2784),Z=r(3955),E=r(2202);function _(){var e,s,r,t,n,x,w=(0,o.aC)().data,v=(0,d.R2)(),g=(0,Z.cI)({resolver:(0,y.F)(N.UserSchema.update)});(0,S.useEffect)(function(){w&&g.reset({phone:w.phone,address:w.address,city:w.city,state:w.state,nationality:w.nationality,ssn:w.ssn})},[w,g]);var _=g.handleSubmit(function(e){v.mutate(e,{onSuccess:function(){E.ZP.success("User information updated successfully")},onError:function(e){E.ZP.error((0,j.Z)(e))}})}),I=(0,c.F)();return(0,l.jsx)(h.c,{children:(0,l.jsx)(h.c.User,{children:(0,l.jsxs)(f.$,{children:[(0,l.jsx)(f.$.Title,{children:(0,l.jsx)("h3",{children:"User Information"})}),(0,l.jsxs)(f.$.Content,{className:"py-6",children:[(0,l.jsx)("p",{className:"mt-2",children:"Update user information and contact details."}),(0,l.jsxs)("form",{onSubmit:_,className:"mt-2 divide-y",children:[(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2 py-4",children:[(0,l.jsx)("p",{children:"Phone"}),(0,l.jsx)(m.I.WithError,{className:"w-auto",error:null===(e=g.formState.errors.phone)||void 0===e?void 0:e.message,children:(0,l.jsx)(m.I,(0,a.Z)({className:"w-full",type:"tel"},g.register("phone")))})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2 py-4",children:[(0,l.jsx)("p",{children:"Nationality"}),(0,l.jsx)(m.I.WithError,{className:"w-auto sm:w-[334px]",error:null===(s=g.formState.errors.nationality)||void 0===s?void 0:s.message,children:I.data&&(0,l.jsxs)(p.P,(0,i.Z)((0,a.Z)({className:"w-full !py-3 text-sm"},g.register("nationality")),{children:[(0,l.jsx)("option",{value:"",children:"Select Country"}),I.data.map(function(e){return(0,l.jsx)("option",{children:e.name},e.name)})]}))})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2 py-4",children:[(0,l.jsx)("p",{children:"State"}),(0,l.jsx)(m.I.WithError,{className:"w-auto",error:null===(r=g.formState.errors.state)||void 0===r?void 0:r.message,children:(0,l.jsx)(m.I,(0,a.Z)({className:"w-full"},g.register("state")))})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2 py-4",children:[(0,l.jsx)("p",{children:"City"}),(0,l.jsx)(m.I.WithError,{className:"w-auto",error:null===(t=g.formState.errors.city)||void 0===t?void 0:t.message,children:(0,l.jsx)(m.I,(0,a.Z)({className:"w-full"},g.register("city")))})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2 py-4",children:[(0,l.jsx)("p",{children:"Home Address"}),(0,l.jsx)(m.I.WithError,{className:"w-auto",error:null===(n=g.formState.errors.address)||void 0===n?void 0:n.message,children:(0,l.jsx)(m.I,(0,a.Z)({className:"w-full"},g.register("address")))})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-2 py-4",children:[(0,l.jsx)("p",{children:"SSN"}),(0,l.jsx)(m.I.WithError,{className:"w-auto",error:null===(x=g.formState.errors.ssn)||void 0===x?void 0:x.message,children:(0,l.jsx)(m.I,(0,a.Z)({className:"w-full",type:"tel"},g.register("ssn")))})]}),(0,l.jsx)("div",{className:"flex justify-end pt-4 gap-2",children:(0,l.jsx)(u.z,{disabled:!g.formState.isDirty,variant:g.formState.isDirty?"dark":"transparent-dark",loading:v.isLoading,className:"!px-12 !py-2",children:"Save Changes"})})]})]}),(0,l.jsxs)(f.$.Content,{className:"py-6",children:[(0,l.jsx)("p",{className:"mt-2",children:"Update profile photo."}),(0,l.jsx)(b,{})]})]})})})}function b(){(0,g.useRouter)();var e,s=(0,o.aC)().data,r=(0,Z.cI)(),c=(0,d.R2)(),m=r.handleSubmit((e=(0,t.Z)(function(e){var t,l,o;return(0,n.__generator)(this,function(n){switch(n.label){case 0:if(t=e.file,!s)return[2];return(l=new FormData).append("file",t[0]),l.append("upload_preset",x.$.upload.PRESET),[4,v().post(x.$.upload.URL,l)];case 1:return o=n.sent().data,c.mutate((0,i.Z)((0,a.Z)({},s),{avatar:o.secure_url}),{onSuccess:function(){(0,E.ZP)("Profile photo updated successfully"),r.reset()},onError:function(e){E.ZP.error((0,j.Z)(e))}}),[2]}})}),function(s){return e.apply(this,arguments)}));return(0,l.jsxs)("form",{onSubmit:m,className:"py-12",children:[(0,l.jsx)("input",(0,a.Z)({type:"file",accept:"image/*"},r.register("file",{required:"Please select photo",validate:{size:function(e){if(e[0].size>10485760)return"File too large, max allowed is 10mb"},type:function(e){if(!e[0].type.startsWith("image"))return"Invalid file type"}}}))),r.formState.errors.file&&(0,l.jsx)("p",{className:"text-red-400 py-2",children:r.formState.errors.file.message}),(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(u.z,{loading:c.isLoading,children:"Upload"})})]})}}},function(e){e.O(0,[949,599,975,955,383,503,273,774,888,179],function(){return e(e.s=8485)}),_N_E=e.O()}]);