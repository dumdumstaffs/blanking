(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{6783:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signin",function(){return t(4930)}])},7545:function(e,n,t){"use strict";t.d(n,{oc:function(){return j},aC:function(){return b},YA:function(){return Z},_y:function(){return _},l4:function(){return N},yI:function(){return w},Mp:function(){return C},Su:function(){return S}});var r=t(8788),i=t(5163),a=t(7079);function u(e){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(function(e){var n;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,a.dJ.post("/auth/request-otp",e)];case 1:return[2,n.sent().data]}})})).apply(this,arguments)}function o(e){return c.apply(this,arguments)}function c(){return(c=(0,r.Z)(function(e){var n;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,a.dJ.post("/auth/login",e)];case 1:return[2,n.sent().data]}})})).apply(this,arguments)}function l(){return d.apply(this,arguments)}function d(){return(d=(0,r.Z)(function(){var e;return(0,i.__generator)(this,function(e){switch(e.label){case 0:return[4,a.dJ.get("/auth/profile")];case 1:return[2,e.sent().data]}})})).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(function(e){var n;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,a.dJ.post("/auth/register",e)];case 1:return[2,n.sent().data]}})})).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(function(e){var n;return(0,i.__generator)(this,function(n){switch(n.label){case 0:return[4,a.dJ.post("/auth/verify",e)];case 1:return[2,n.sent().data]}})})).apply(this,arguments)}function v(){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)(function(){var e;return(0,i.__generator)(this,function(e){switch(e.label){case 0:return[4,a.dJ.post("/auth/verify/request")];case 1:return[2,e.sent().data]}})})).apply(this,arguments)}var x=t(5148),y=t(2066),j=(0,x.no)("auth"),b=function(){return(0,y.useQuery)(j._def,l,{retry:!1})},w=function(){return(0,y.useMutation)(u)},Z=function(){var e=(0,y.useQueryClient)();return(0,y.useMutation)(o,{onSuccess:function(n){var t=n.token;return(0,a.o4)(t),e.invalidateQueries(j._def)}})},N=function(){return(0,y.useMutation)(f)},_=function(){var e=(0,y.useQueryClient)();return(0,y.useMutation)((0,r.Z)(function(){return(0,i.__generator)(this,function(e){return[2,(0,a.gy)()]})}),{onMutate:function(){return e.cancelQueries(j._def)},onSuccess:function(){return e.invalidateQueries(j._def)}})},C=function(){var e=(0,y.useQueryClient)();return(0,y.useMutation)(p,{onSuccess:function(){return e.invalidateQueries(j._def)}})},S=function(){return(0,y.useMutation)(v)}},9744:function(e,n,t){"use strict";t.d(n,{d:function(){return s},u:function(){return o}});var r=t(2322),i=t(1586),a=t(6875),u=t(2784);function s(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=(0,u.useState)(!1),t=n[0],r=n[1],i=function(){return r(function(e){return!e})};return[i,{isOpen:t,onClose:i,backdropClose:e}]}function o(e){var n=e.title,t=e.isOpen,s=e.onClose,o=e.backdropClose,c=e.children;return(0,r.jsx)(i.u,{appear:!0,show:t,as:u.Fragment,children:(0,r.jsxs)(a.V,{as:"div",className:"relative z-10 text-sm",onClose:void 0===o||o?s:function(){},children:[(0,r.jsx)(i.u.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),(0,r.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,r.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 ",children:(0,r.jsx)(i.u.Child,{as:u.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,r.jsxs)(a.V.Panel,{className:"w-full max-w-lg transform overflow-hidden rounded-md bg-white px-3 py-4 md:px-6 md:py-6 align-middle shadow-xl transition-all",children:[n&&(0,r.jsx)(a.V.Title,{className:"mb-6 md:text-lg text-center font-medium leading-6 text-gray-900",children:n}),c]})})})})]})})}},412:function(e,n,t){"use strict";t.d(n,{p:function(){return d},z:function(){return l}});var r=t(865),i=t(6670),a=t(6297),u=t(2322),s=t(6277),o=t(2784),c=t(5392),l=(0,o.forwardRef)(function(e,n){var t=e.loading,o=e.variant,l=void 0===o?"dark":o,d=e.className,f=e.children,h=(0,a.Z)(e,["loading","variant","className","children"]);return(0,u.jsx)("button",(0,i.Z)((0,r.Z)({ref:n,disabled:t},h),{className:(0,s.Z)(["flex-center px-4 py-2 border font-medium","focus:outline-none focus:ring-2 focus:ring-theme-1 focus:ring-offset-1","light"===l&&["border-white bg-white text-gray-800",],"dark"===l&&["border-blue-900 bg-blue-900 text-white",],"critical"===l&&["border-red-100 bg-red-100 text-red-700 focus:!ring-red-700"],"transparent-light"===l&&["border-white text-white"],"transparent-dark"===l&&["border-gray-200 text-gray-800"],d,]),children:t?(0,u.jsx)(c.$,{className:"w-5 h-5"}):f}))});l.displayName="Button";var d=function(e){var n=e.onClick,t=e.variant,s=e.children,c=(0,a.Z)(e,["onClick","variant","children"]),d=(0,o.useState)(!1),f=d[0],h=d[1],p=function(){return h(!0)},m=function(){return h(!1)},v=function(e){h(!1),n(e)};return f?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l,(0,i.Z)((0,r.Z)({},c),{variant:"dark",onClick:m,children:"Cancel"})),(0,u.jsx)(l,(0,i.Z)((0,r.Z)({},c),{variant:"critical",onClick:v,children:"Proceed"}))]}):(0,u.jsx)(l,(0,i.Z)((0,r.Z)({},c),{variant:void 0===t?"critical":t,onClick:p,children:s}))}},952:function(e,n,t){"use strict";t.d(n,{D:function(){return m}});var r=t(865),i=t(6670),a=t(2322),u=t(930),s=t(1899),o=t(412),c=t(45),l=t(2784);function d(e){var n=e.pinLength,t=e.onSubmit,r=(0,l.useState)(""),i=r[0],d=r[1],f=(0,l.useState)([]),p=f[0],m=f[1],v=(0,l.useCallback)(function(e){m(function(n){return(0,u.Z)(n).concat([e])})},[]),g=function(e){e.preventDefault(),i.length===n&&t(i)};return(0,a.jsxs)("form",{onSubmit:g,children:[(0,a.jsx)("p",{className:"text-center text-gray-700",children:"Please enter your transaction PIN to complete this action"}),(0,a.jsx)("div",{className:"flex justify-between gap-4 h-16 sm:h-20 my-12",children:Array.from({length:n}).map(function(e,t){return(0,a.jsx)(c.I,{ref:v,onChange:function(){var e;return function(e){var n=e.inputs,t=e.index,r=e.value,i=e.setValue,a=e.pinLength,u=n[t];if(u){if(r.length-1===t&&""===u.value){i(function(e){return e.slice(0,-1)});return}if(r.length!==t){u.value=null!==(c=r[t])&&void 0!==c?c:"";return}if(1===u.value.length){if(!h(u.value)){u.value=null!==(l=r[t])&&void 0!==l?l:"";return}if(i(function(e){return e+u.value}),t!==a-1){var o=n[t+1];null==o||o.focus()}return}if(u.value.length>1&&0===t){var c,l,d,f=function(e){var r=n[t+e];if(!r)return{v:void 0};r.value=p[e],i(function(n){return n+p[e]}),e===p.length-1&&r.focus()},p=u.value.split("");if(p.length!==a||!p.every(h)){u.value=null!==(d=r[t])&&void 0!==d?d:"";return}for(var m=0;m<p.length;m++){var v=f(m);if("object"===(0,s.Z)(v))return v.v}return}}}({inputs:p,index:t,pinLength:n,value:i,setValue:d})},type:"tel",className:"text-center text-3xl h-full w-full bg-gray-100"},t)})}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(o.z,{className:"!px-12 !py-2",children:"Confirm"})})]})}var f=["0","1","2","3","4","5","6","7","8","9"],h=function(e){return f.includes(e)},p=t(9744);function m(e){var n=e.title,t=e.onVerify,u=e.controls,s=function(e){t(e),u.onClose()};return(0,a.jsx)(p.u,(0,i.Z)((0,r.Z)({title:n},u),{children:(0,a.jsx)(d,{pinLength:4,onSubmit:s})}))}},1396:function(e,n,t){"use strict";t.d(n,{g:function(){return d}});var r=t(865),i=t(6670),a=t(2322),u=t(7545),s=t(4005),o=t(4819),c=t(7729),l=t.n(c);function d(e){var n,t=e.mode,c=e.description,d=e.children,f=(0,u.aC)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l(),{children:[(0,a.jsx)("title",{children:o.$.app.NAME}),(0,a.jsx)("meta",{name:"description",content:(c?c+" | ":"")+"Premium Edge Bank - Banking, Loan & Insurance"}),(0,a.jsx)("link",{rel:"shortcut icon",type:"image/png",href:"/logo.jpg"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0",id:"viewport"})]}),(0,a.jsx)("div",{className:"bg-grad-bluegreen text-sm",children:(0,a.jsx)("div",{className:"bg-[url('/pattern.png')] bg-cover bg-center",children:(0,a.jsx)(s.n,(0,i.Z)((0,r.Z)({query:f},"unverified"===(n=void 0===t?"guest":t)?{showOn:"success",redirectTo:"/signin",onSuccessRedirectCondition:function(e){if(e.isVerified)return"/"}}:"authenticated"===n?{showOn:"success",redirectTo:"/signin"}:"guest"===n?{showOn:"failure",redirectTo:"/"}:{showOn:"all"}),{children:(0,a.jsx)("main",{className:"min-h-screen flex flex-col items-center justify-center px-3 py-12 md:pt-16",children:d})}))})})]})}},4930:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return _}});var r=t(865),i=t(6670),a=t(6383),u=t(2322),s=t(7545),o=t(9744),c=t(412),l=t(45),d=t(4819),f=t(952),h=t(1396),p=t(8295),m=t(8883),v=t(9697),g=t(6577),x=t.n(g),y=t(9097),j=t.n(y),b=t(5632),w=t(3955),Z=t(2202),N=v.AuthSchema.login.omit({otp:!0});function _(){var e,n,t=(0,b.useRouter)(),v=(0,s.yI)(),g=(0,s.YA)(),y=(0,w.cI)({resolver:(0,m.F)(N)}),_=(0,a.Z)((0,o.d)(),2),C=_[0],S=_[1],k=y.handleSubmit(function(e){v.mutate(e,{onSuccess:C,onError:function(e){Z.ZP.error((0,p.Z)(e),{id:"signin"})}})}),E=function(e){return g.mutate((0,i.Z)((0,r.Z)({},y.getValues()),{otp:e}),{onSuccess:function(){t.push("/")},onError:function(e){Z.ZP.error((0,p.Z)(e),{id:"signin"})}})};return(0,u.jsxs)(h.g,{description:"Sign In",children:[(0,u.jsx)("div",{className:"mb-3",children:(0,u.jsx)(x(),{alt:"logo",src:"/logo.jpg",width:150,height:50})}),(0,u.jsxs)("div",{className:"w-full max-w-md bg-white rounded-md shadow-sm",children:[(0,u.jsxs)("div",{className:"px-3 sm:px-6 py-4 border-b",children:[(0,u.jsx)("h2",{className:"text-xl font-medium text-gray-800",children:"Sign In"}),(0,u.jsx)("p",{className:"mt-2 text-gray-600",children:"Please fill in your login details"})]}),(0,u.jsxs)("form",{onSubmit:k,className:"px-3 sm:px-6 py-6 space-y-4",children:[(0,u.jsx)(l.I.WithError,{error:null===(e=y.formState.errors.email)||void 0===e?void 0:e.message,children:(0,u.jsx)(l.I,(0,r.Z)({className:"w-full py-4 text-sm",placeholder:"Email Address"},y.register("email")))}),(0,u.jsx)(l.I.WithError,{error:null===(n=y.formState.errors.password)||void 0===n?void 0:n.message,children:(0,u.jsx)(l.I,(0,r.Z)({type:"password",className:"w-full py-4 text-sm",placeholder:"Password"},y.register("password")))}),(0,u.jsxs)("p",{className:"text-gray-500 text-center",children:["Don't have an account?",(0,u.jsx)(j(),{href:"/signup",children:(0,u.jsx)("a",{className:"ml-1 text-theme-blue font-medium",children:"Open an Account"})})]}),(0,u.jsx)("div",{className:"pt-3 w-full",children:(0,u.jsx)(c.z,{variant:"transparent-light",loading:v.isLoading,className:"!py-3 !bg-grad-bluegreen !text-white rounded-sm w-full uppercase",children:"Sign In"})})]})]}),(0,u.jsx)(f.D,{title:"Enter OTP (One Time Passcode)",onVerify:E,controls:S}),(0,u.jsxs)("p",{className:"mt-3 text-xs text-white text-center",children:["\xa9 ",d.$.app.NAME," ",new Date().getFullYear()]})]})}},7567:function(e,n,t){"use strict";t.d(n,{B:function(){return s}});var r=t(7842),i=t(865),a=t(6670),u=t(6383);function s(e,n){return Object.defineProperties(e,Object.entries(n).reduce(function(e,n){var t=(0,u.Z)(n,2),s=t[0],o=t[1];return(0,a.Z)((0,i.Z)({},e),(0,r.Z)({},s,{value:o}))},{})),e}},930:function(e,n,t){"use strict";t.d(n,{Z:function(){return u}});var r=t(630),i=t(8366),a=t(5459);function u(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1899:function(e,n,t){"use strict";function r(e){return e&&e.constructor===Symbol?"symbol":typeof e}t.d(n,{Z:function(){return r}})}},function(e){e.O(0,[949,599,875,955,383,680,774,888,179],function(){return e(e.s=6783)}),_N_E=e.O()}]);